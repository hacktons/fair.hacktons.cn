(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{364:function(a,t,e){a.exports=e.p+"assets/img/fairc-bundle.35254495.png"},402:function(a,t,e){"use strict";e.r(t);var s=e(42),n=Object(s.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"bundle资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bundle资源"}},[a._v("#")]),a._v(" Bundle资源")]),a._v(" "),s("p",[a._v("现在我们已经了解了模板资源的语法和格式，接下来介绍如何从dart源码直接生成bundle文件。")]),a._v(" "),s("blockquote",[s("p",[a._v("目前自动生成能力仅适用于严格的build函数，请确保不包含逻辑运算，生成失败需要手工编写、修正")])]),a._v(" "),s("h2",{attrs:{id:"环境检查"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境检查"}},[a._v("#")]),a._v(" 环境检查")]),a._v(" "),s("p",[a._v("首先确保Dart-SDK已经正常配置。通常dart-sdk目录下有如下内容：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("aven-mac-pro:dart-sdk aven$ ls bin/\ndart\t\tdartanalyzer\tdartdoc\t\tpub\t\tutils\ndart2js\t\tdartaotruntime\tdartfmt\t\tresources\ndart2native\tdartdevc\tmodel\t\tsnapshots\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("可以通过以下命令检查：")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("which")]),a._v(" dart2native\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"bundle生成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bundle生成"}},[a._v("#")]),a._v(" bundle生成")]),a._v(" "),s("p",[a._v("在项目的根目录下，执行build_runner触发构建: "),s("code",[a._v("flutter pub run build_runner build")])]),a._v(" "),s("p",[a._v("日志较多，可以按需过滤，执行完成后，可以看到生成的bundle文件。")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("aven-mac-pro:example aven$ flutter pub run build_runner build |grep Fair\n[Fair] Compile lib/page/zhihu/my_page.dart into bundle...\n[Fair] Compile lib/page/hello_world.dart into bundle...\n[Fair] Compile lib/page/layout_sugar_page.dart into bundle...\n[Fair] New bundle generated => build/fair/lib_page_layout_sugar_page.fair\n[Fair] New bundle generated => build/fair/lib_page_zhihu_my_page.fair\n[Fair] New bundle generated => build/fair/lib_page_hello_world.fair\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("文件位于"),s("code",[a._v("build/fair")]),a._v("目录下，可以取出**.fair**文件，通过网络或者内置在App中使用:")]),a._v(" "),s("p",[s("img",{attrs:{src:e(364),alt:"fair bundle"}})]),a._v(" "),s("h2",{attrs:{id:"bundle使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bundle使用"}},[a._v("#")]),a._v(" bundle使用")]),a._v(" "),s("p",[a._v("通过FairWidget引用bundle资源，更高级的用法请参考demo。")]),a._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("FairWidget")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'http://xxx.com/resource.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'demo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h2",{attrs:{id:"约束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#约束"}},[a._v("#")]),a._v(" 约束")]),a._v(" "),s("p",[a._v("目前bundle能力并不完善，可能会出现错误，如果遇到可以反馈。")]),a._v(" "),s("p",[a._v("无论是bundle编写还是生成，都不能包含逻辑运算，Fair当前只能处理静态的布局渲染。")])])}),[],!1,null,null,null);t.default=n.exports}}]);